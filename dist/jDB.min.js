!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DB=t():e.DB=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"isAvail",value:function(e){if(null!==e&&void 0!==e){if("string"==typeof e&&e.length>0)return!0;if("number"==typeof e)return!0;if("object"===(void 0===e?"undefined":o(e)))return!0}return!1}},{key:"loadJSON",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.overrideMimeType("application/json"),e=e||"db_config.json",r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&"200"==r.status&&t(JSON.parse(r.responseText))},r.send(null)})}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o={EQUAL:"equal",STARTS_WITH:"startsWith",ENDS_WITH:"endsWith",GREATER_THAN:"greaterThan",GREATER_THAN_OR_EQUAL:"greaterThanOrEqual",LESSER_THAN:"lesserThan",LESSER_THAN_OR_EQUAL:"lesserThanOrEqual",BETWEEN:"between"},i=function e(t,n,o){r(this,e),this.type=t,this.value=n,o&&(this.index=o.name)};t.Filter=i,t.FILTER_SPLITTER="~",t.FILTER_TYPE=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(){function e(){r(this,e)}return i(e,[{key:"setter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"string";(void 0===e?"undefined":o(e))===r?this[t]=e:n&&!a.default.isAvail(e)&&this.error(t,e)}},{key:"error",value:function(e,t){throw new Error(this.constructor.name+" : "+e+" is "+t)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.IndexEntity=t.StoreEntity=t.DBEntity=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(8),a=r(u),s=n(12),c=r(s),f=n(6),l=r(f),d=n(7),y=r(d),h=n(13),p=r(h),b=function(){function e(){o(this,e),this.xDB,this.DBs={},this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"},this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange}return i(e,[{key:"setDB",value:function(e,t){this.DBs[e]=t}},{key:"getDB",value:function(e){return this.DBs[e]}}],[{key:"getInst",value:function(){return this.xDB||(this.xDB=new e),this.xDB}},{key:"setup",value:function(e){var t=this;return e instanceof c.default||(e=c.default.fromJSON(e)),new Promise(function(n,r){(new p.default).conifg(e).then(function(r){t.getInst().setDB(e.databaseName,r),n(t.getInst()[e.databaseName]=new a.default(e))}).catch(function(e){return r(e)})})}}]),e}();t.default=b,t.DBEntity=c.default,t.StoreEntity=l.default,t.IndexEntity=y.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),a=n(0),s=r(a),c=n(10),f=r(c),l=function(){function e(t,n,r){o(this,e),this._databaseName=t,r&&(this._filter=r),n&&(this._xStoreEntity=n)}return i(e,[{key:"get",value:function(e,t,n){var r=void 0;return IDBObjectStore.prototype.getAll&&void 0===e?r=new u.GetAllDAO:(e instanceof Array||(e=[e]),r=new u.CursorDAO(e,t,n)),this._action(r)}},{key:"getDist",value:function(e,t,n){if(!s.default.isAvail(e)||"string"!=typeof e)throw new ReferenceError(e+" is either not defined or not typeof string");return this._action(new u.CursorDAO([e],t,n),!0)}},{key:"update",value:function(e){return this._action(new u.CursorUpdateDAO(e))}},{key:"delete",value:function(){return this._action(new u.CursorDeleteDAO)}},{key:"_action",value:function(e,t){var n=this;return e.setFilter(this._filter),new Promise(function(r,o){try{e.check(n._xStoreEntity)?n._req(e,t,r,o):o(e.error)}catch(e){o(e)}})}},{key:"_req",value:function(e,t,n,r){var o=this,i=e.objectStore(this._databaseName,this._xStoreEntity.name),a=new f.default;a.setDistinct(t);var s=i[e.action](e.values);s.onsuccess=function(t){e.action===u.ACTION.CURSOR?o._cursor(t,e,a,n):(a=t.target.result instanceof Array?a.concat(t.target.result):t.target.result,n(a))},s.onerror=function(e){r(e.target.error)}}},{key:"_cursor",value:function(e,t,n,r){var o=e.target.result;if(t.start)o.advance(t.start),t.start=void 0;else if(o&&(!t.limit||n.length<t.limit)){var i={};if(t.columns?1===t.columns.length?o.value[t.columns[0]]&&(i=o.value[t.columns[0]]):t.columns.forEach(function(e){o.value[e]&&(i[e]=o.value[e])}):i=o.value,t.filter){var a=o.value[t.filter.index];if(a)switch(t.filter.type){case"endsWith":a.endsWith(t.filter.values)||(i=void 0);break;default:console.log(t.filter.type+" condition is not handled")}}if(i)if(t.newValues){var s=Object.assign(o.value,t.newValues),c=o.update(s);c.onsuccess=function(e){n.push(e.target.result)},c.onerror=function(e){reject(e.target.error)}}else if(t.newAction===u.ACTION.DELETE){var f=o.delete();f.onsuccess=function(e){n.push(e.target.result)},f.onerror=function(e){reject(e.target.error)}}else n.push(i);o.continue()}else t.newAction===u.ACTION.DELETE&&(n=n.length),r(n)}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.CursorUpdateDAO=t.CursorDeleteDAO=t.CursorDAO=t.DeleteDAO=t.UpdateDAO=t.CountDAO=t.ClearDAO=t.AddDAO=t.GetAllDAO=t.GetDAO=t.DAO=t.ACCESS=t.ACTION=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),c=r(s),f=n(1),l=n(0),d=r(l),y=t.ACTION={ADD:"add",GET:"get",GET_ALL:"getAll",CURSOR:"openCursor",PUT:"put",DELETE:"delete",CLEAR:"clear",COUNT:"count"},h=t.ACCESS={READ_WRITE:"readwrite",READ_ONLY:"readonly"},p=function(){function e(t,n,r,o,i,a,s,c){u(this,e),this.access=t,this.index=n,this.action=r,this._key=o,this.values=i,this.columns=a,this.limit=s,this.start=c}return a(e,[{key:"getDB",value:function(e){return c.default.getInst().getDB(e)}},{key:"objectStore",value:function(e,t){if(!t)throw new Error("Store is not defined");var n=this.getDB(e).transaction([t],this.access);n.oncomplete=function(e){},n.onerror=function(e){};var r=n.objectStore(t);return this.index&&("string"==typeof this.index||"number"==typeof this.index?r=r.index(this.index):reject("Only one key is alowed in update")),r}},{key:"check",value:function(e){var t=this;if(this.action===y.ADD){if(!e.autoIncrement&&!this.values[e.keyPath])return this.error=e.keyPath+" is not defined in "+e.name,!1;e.indexes.forEach(function(n){if(!1===n.nullable&&!t.values[n.name])return t.error=n.name+" is not defined in "+e.name,!1})}else this.action===y.CURSOR&&d.default.isAvail(this.newValues);return!0}},{key:"setFilter",value:function(e){if(e&&e.type)switch(this.index=e.index,e.type){case f.FILTER_TYPE.EQUAL:this.values=c.default.getInst().IDBKeyRange.only(e.value);break;case f.FILTER_TYPE.STARTS_WITH:this.values=c.default.getInst().IDBKeyRange.bound(e.value,e.value+"￿");break;case f.FILTER_TYPE.GREATER_THAN:this.values=c.default.getInst().IDBKeyRange.lowerBound(e.value,!0);break;case f.FILTER_TYPE.LESSER_THAN:this.values=c.default.getInst().IDBKeyRange.upperBound(e.value,!0);break;case f.FILTER_TYPE.GREATER_THAN_OR_EQUAL:this.values=c.default.getInst().IDBKeyRange.lowerBound(e.value,!1);break;case f.FILTER_TYPE.LESSER_THAN_OR_EQUAL:this.values=c.default.getInst().IDBKeyRange.upperBound(e.value,!1);break;case f.FILTER_TYPE.BETWEEN:var t=e.value.split("~");this.values=c.default.getInst().IDBKeyRange.bound(Number(t[0]),Number(t[1]));break;default:this.index=void 0,this.filter=e,this.action=y.CURSOR}}},{key:"_key",set:function(e){if(d.default.isAvail(e)){if("string"!=typeof e&&"number"!=typeof e)throw new Error(e+" should be of type string | number only");this.key=e}}}]),e}(),b=function(e){function t(e){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.ADD,void 0,e))}return i(t,e),t}(p),_=function(e){function t(){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.CLEAR))}return i(t,e),t}(p),v=function(e){function t(){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_ONLY,void 0,y.COUNT))}return i(t,e),t}(p),E=function(e){function t(e){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.DELETE,e))}return i(t,e),t}(p),O=function(e){function t(e){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.PUT,void 0,e))}return i(t,e),t}(p),w=function(e){function t(e){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_ONLY,void 0,y.GET,e))}return i(t,e),t}(p),m=function(e){function t(){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_ONLY,void 0,y.GET_ALL))}return i(t,e),t}(p),g=function(e){function t(e,n,r){return u(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.CURSOR,void 0,void 0,e,n,r))}return i(t,e),t}(p),T=function(e){function t(e){u(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.CURSOR));return n.newValues=e,n}return i(t,e),t}(p),A=function(e){function t(){u(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,h.READ_WRITE,void 0,y.CURSOR));return e.newAction=y.DELETE,e}return i(t,e),t}(p);t.DAO=p,t.GetDAO=w,t.GetAllDAO=m,t.AddDAO=b,t.ClearDAO=_,t.CountDAO=v,t.UpdateDAO=O,t.DeleteDAO=E,t.CursorDAO=g,t.CursorDeleteDAO=A,t.CursorUpdateDAO=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),f=r(c),l=n(7),d=r(l),y=function(e){function t(e,n,r){var u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"string";o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.autoIncrement=u,s.setter(e,"name",!0),s.setter(n,"keyPath",!0),s.type=a,s.setIndexes=r,s}return u(t,e),s(t,[{key:"setIndexes",set:function(e){var t=this;this.indexes=[],"object"===(void 0===e?"undefined":a(e))&&e instanceof Array?e.forEach(function(e){e instanceof d.default||(e=d.default.fromJSON(e)),t.indexes.push(e)}):void 0!==e&&this.error("indexes",e)}}],[{key:"fromJSON",value:function(e){return new t(e.name,e.keyPath,e.indexes,e.autoIncrement,e.type)}}]),t}(f.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"string";r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.setter(e,"name"),s.unique=n,s.multiEntry=i,s.type=a,s.nullable=u,s}return i(t,e),u(t,null,[{key:"fromJSON",value:function(e){return new t(e.name,e.unique,e.multiEntry,e.nullable,e.type)}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9),u=function(e){return e&&e.__esModule?e:{default:e}}(i),a=function(){function e(t){var n=this;r(this,e),this._databaseName=t.databaseName,t.stores.forEach(function(e){n[e.name]=new u.default(t.databaseName,e)})}return o(e,[{key:"delete",value:function(){var e=this;return new Promise(function(t,n){e.getDB().close();var r=DB.getInst().indexedDB.deleteDatabase(e._databaseName);r.onsuccess=function(e){t("Database deleted Successfully")},r.onerror=function(e){n(e.target.error)}})}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=n(11),f=n(5),l=(n(1),function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return n.indexes.forEach(function(t){var r=void 0;r="number"===t.type?new c.NIndexDAO(e,n,t):new c.IndexDAO(e,n,t),i[t.name]=r}),"number"===n.type?i[n.keyPath]=new c.NIndexDAO(e,n):i[n.keyPath]=new c.IndexDAO(e,n),i}return i(t,e),u(t,[{key:"add",value:function(e){var t=this;return e instanceof Array?new Promise(function(n,r){var o={};o.index=0,o.values=e,t._bulkAdd(o,n,r)}):this._action(new f.AddDAO(e))}},{key:"_bulkAdd",value:function(e,t,n){var r=this;e.index<e.values.length?this._action(new f.AddDAO(e.values[e.index])).then(function(o){e.index++,r._bulkAdd(e,t,n)}).catch(function(t){n(t,e.values[e.index])}):t(e.index)}},{key:"clear",value:function(){return this._action(new f.ClearDAO)}},{key:"count",value:function(){return this._action(new f.CountDAO)}},{key:"delete",value:function(e){return this._action(new f.DeleteDAO(e))}},{key:"update",value:function(e,t){return t[this._xStoreEntity.keyPath]=e,this._action(new f.UpdateDAO(t))}}]),t}(s.default));t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(){function e(){r(this,e),this.arr=new Array}return i(e,[{key:"setDistinct",value:function(e){this.distinct=e}},{key:"push",value:function(e){this.distinct&&-1!==this.arr.indexOf(e)||this.arr.push(e)}},{key:"count",value:function(){return this.arr.length}},{key:"avg",value:function(e){if(!a.default.isAvail(e)||"string"!=typeof e)throw new TypeError("Please provide column to find min");var t=0;return this.arr.forEach(function(n){n="object"===(void 0===n?"undefined":o(n))?n[e]:n,a.default.isAvail(n)&&(t+=Number(n))}),t/this.arr.length}},{key:"min",value:function(e){if(!a.default.isAvail(e)||"string"!=typeof e)throw new TypeError("Please provide column to find min");var t=void 0;return this.arr.forEach(function(n){n="object"===(void 0===n?"undefined":o(n))?n[e]:n,(!t||t>n)&&(t=n)}),t}},{key:"max",value:function(e){if(!a.default.isAvail(e)||"string"!=typeof e)throw new TypeError("Please provide column to find min");var t=void 0;return this.arr.forEach(function(n){n="object"===(void 0===n?"undefined":o(n))?n[e]:n,(!t||t<n)&&(t=n)}),t}},{key:"concat",value:function(e){return this.arr=this.arr.concat(e),this}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.NIndexDAO=t.IndexDAO=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(a),c=n(1),f=function(e){function t(e,n,i){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return u._xIndexEntity=i,u}return i(t,e),u(t,[{key:"equalDist",value:function(e){return this._action(ACTION.GET,ACCESS.READ_ONLY,e)}},{key:"equal",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.EQUAL,e,this._xIndexEntity))}},{key:"startsWith",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.STARTS_WITH,e,this._xIndexEntity))}},{key:"endsWith",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.ENDS_WITH,e,this._xIndexEntity))}}]),t}(s.default),l=function(e){function t(e,n,i){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i))}return i(t,e),u(t,[{key:"greaterThan",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.GREATER_THAN,e,this._xIndexEntity))}},{key:"lesserThan",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.LESSER_THAN,e,this._xIndexEntity))}},{key:"greaterThanOrEqual",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.GREATER_THAN_OR_EQUAL,e,this._xIndexEntity))}},{key:"lesserThanOrEqual",value:function(e){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.LESSER_THAN_OR_EQUAL,e,this._xIndexEntity))}},{key:"between",value:function(e,t){return new s.default(this._databaseName,this._xStoreEntity,new c.Filter(c.FILTER_TYPE.BETWEEN,e+c.FILTER_SPLITTER+t,this._xIndexEntity))}}]),t}(f);t.IndexDAO=f,t.NIndexDAO=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),f=r(c),l=n(6),d=r(l),y=function(e){function t(e,n,r){o(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.setter(e,"databaseName",!0),u.setter(n,"version",!0,"number"),u.setStores=r,u}return u(t,e),s(t,[{key:"setStores",set:function(e){var t=this;if(this.stores=[],"object"===(void 0===e?"undefined":a(e))&&e instanceof Array)e.forEach(function(e){e instanceof d.default||(e=d.default.fromJSON(e)),t.stores.push(e)});else if(void 0!==e)throw new TypeError(e+" is of not of type [Object|Array]")}}],[{key:"fromJSON",value:function(e){return new t(e.databaseName,e.version,e.stores)}}]),t}(f.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"conifg",value:function(e){var t=this;return new Promise(function(n,r){var o=DB.getInst().indexedDB.open(e.databaseName,e.version);o.onupgradeneeded=function(n){e.stores.forEach(function(e){t.createStore(n.target.result,e)}),n.target.result.onversionchange=function(e){e.target.result.close(),alert("A new version of this page is ready. Please reload!")}},o.onblocked=function(e){alert("Please close all other tabs with this site open!")},o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){r(e.target.error)}})}},{key:"createStore",value:function(e,t){e.objectStoreNames.contains(t.name)&&e.deleteObjectStore(t.name);var n=e.createObjectStore(t.name,{keyPath:t.keyPath,autoIncrement:t.autoIncrement});t.indexes.forEach(function(e){n.createIndex(e.name,e.name,{unique:e.unique,multiEntry:e.multiEntry})})}}]),e}();t.default=i}]).default});